<!--
 * @Author: water.li
 * @Date: 2023-05-04 22:06:38
 * @Description:
 * @FilePath: \Notebook\前端运维\.md
-->

# linux

## ifconfig 查看 IP 地址

## clear 清空屏幕

## ls 查看目录

- 选项
  - -a 显示所有文件，包括隐藏文件
  - -l 显示详细信息
  - -d 查看目录本身属性而非子文件
  - -h 以人性化的方式显示文件大小

## mkdir 创建目录

- -p 以递归方式创建

## rmdir 删除目录

## rm 删除文件或者目录

- -r 删除目录
- -f 强制删除
- rm -rf [文件或目录] 递归强制删除所有目录

## cp 复制命令

- cp [源文件或目录] [目标文件]
- -r 复制目录，默认的是复制文件
- -i 会在复制文件的时候给提示，如果复制的目标文件存在，会给你提示是否要覆盖

## mv 移动文件或改名

- mv [源文件或目录] [目标文件]

## 文件搜索命令

### locate

- 在后台数据库中按文件名搜索，速度比较快
- 安装 yum install mlocate -y
- 可以使用 updatedb 命令立刻更新数据库

### whereis 搜索命令所在的路径以及帮助文档所在的位置

- -b 只查找可执行的文件
- -m 只查看帮助文件

## 环境变量

### echo $PATH 显示环境变量

### find 文件搜索命令

- find [搜索范围] [搜索条件]
- 通配符
  - \*匹配任意内容
  - ?匹配任意一个字符
  - []匹配任意一个中括号内的字符
- -i 不区分大小写
- -user 按所有者搜索
- -a and 逻辑与
- -o or 逻辑否

### grep [内容] [文件名称] 查找文件内容

## 压缩与解压缩命令

- yum install -y unzip zip

### zip -r [压缩后的名称] [文件夹名称]

### gzip 高压缩

-可以把文件压缩得理小 gzip 命令不支持目录

### gzip -d [名称] 解压缩

### tar

- 打包命令，只打包不压缩
- tar -cvf [打包文件名] 源文件 (-zcvf)
- -c 打包
- -v 显示过程
- -f 指定打包后的文件名
- -tar -xvf book.tar book 解包 (-zxvf)

### car [文件名] 查看文件信息

### more [文件名] 一页一页的查看文件信息

# Nginx

## 事件模型

- 目前支持 I/O 多路复用的系统调用有 select, poll 和 epoll
- I/O 多路复用就是通过一种机制，一个进程可以监听多个描述符，一旦某个描述符就绪，能够通知道程序进行相应的读写操作
- 但 select, poll 和 epoll 本质上都是同步 IO，因为它们都需要在读写事件就绪后自己负责进行读写，也就是说这个过程是阻塞的

- select 单个进程能打开的最大连接数为 1024，因为需要对所有文件描述符进行线遍历，所以文件描述符太多会导致性能下降
- poll 和 select 基本一样，因为链表存储文件描述符，没有最大连接数限制
- epoll epoll 是在每个文件描述符上设置 callback 实现，FD 就绪后才会调用 callback,活跃 socket 少的话性能高，socket 活跃多的话性能低

## nginx 配置文件

/etc/nginx/nginx.conf

nginx -s reload nginx 重启

systemctl restart nginx.service
systemctl reload nginx.service
systemctl stop nginx.service

# Docker

### 启动 docker

sudo systemctl start docker

### 登录 docker

docker login

## docker 访问日志

docker logs

### 镜像

- 查看镜像列表 docker image ls
- 查镜镜像 docker search [ubuntu]
- 查看历史 docker image history [ubuntu]
- 查看详情 docker image inspect [ubuntu]
- 拉取镜像 docker image pull [centos]
- 删除镜像 docker image rmi [name|id]
- 删除没人引用的镜像 docker image prune
- 推送镜像 docker push [imagename]
- 导出一个容器 docker export -o centos.tar <container_id>
- 导入一个容器 docker image centos.tar
- 构建镜像 docker build -t express-demo .

### 容器

- 创建容器 docker run -it [image_id] /bin/bash
- 查看当前正在运行的容器 docker container ls [-a]
- 查看容器详情 docker image inspect [containername]
- 查看容器 docker container ps
- 查看所有容器 docker container -a
- 显示最新的那个容器 docker container -l
- 停止容器 docker container stop <container_id>
- 启动容器 docker container start <container_id>
- 删除容器 docker container rm <container_id>
- 删除所有容器 docker container rm $(docker container ps -a -q)
- 进入容器 docker exec <container_id> /bin/bash
- 查看容器日志 docker container logs <container_id>
- 从正在运行的 Docker 容器里面，将文件拷贝到本机 docker container cp <container_id>:/u.txt [文件目录]

docker 容器的状态共有 7 种 created|restarting|running|removing|paused|exited|dead

### commit 制作个性化镜像

## docker volume 数据卷

- 创建数据卷 docker volume create nginx-html
- 查看数据卷详情 docker volume inspect nginx-html
- 挂载数据卷 docker run -d --name nginx1 -v nginx-html:/usr/share/nginx/html nginx
- 删除数据卷 docker volume prune | docke volume rm nginx-html
